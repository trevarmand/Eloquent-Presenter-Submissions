from people import friends

INGREDIENTS = {
    "salt/peppered chicken": .25 lb,
    "onion": .25 cup,
    "garlic": 1 clove,
    "oregano": 1/16 tsp,
    "red pepper flakes": 1/32 tsp,
    "ziti": 8 oz,
    "chicken broth part 1": 3/8 cup,
    "chicken broth part 2": 2/8 cup,
    "water": 5/12 cup,
    "broccoli florets": 1 cup,
    "sun dried tomatoes": 1/16,
    "heavy cream": 1/8 cup,
    "grated asiago": 1/8 cup,
    "lemon juice": 1 tsp
}


def get_ingredient(ingredient, servings):
    return INGREDIENTS[ingredient]*servings


def get_ingredients(ingredients, servings):
    return [get_ingredient(ingredient, servings) for ingredient in ingredients]


def prepare_chicken(pot, servings):
    chicken = get_ingredient("chicken", servings)
    cubed_chicken = chicken.cube(1 inch)

    pot.medium_high_heat()
    pot.add(oil to liking)
    sleep(1 min) # let oil heat up
    pot.add(cubed_chicken)
    sleep(1 min) # slightly brown the bottom of chicken
    pot.stir(2 min or pink on chicken is mostly gone)


def prepare_pasta(pot, servings):
    (
        onion, garlic, oregano, red_pepper_flakes, ziti, chicken_broth_part_1, water
    ) = get_ingredients(["onion", "garlic", "oregano", "red pepper flakes", "ziti", "chicken broth part 1", "water"], servings)
    diced_onion = onion.dice()
    minced_garlic = garlic.mince()

    pot.add(oil to liking)
    sleep(1 min) # let oil heat up
    pot.add(diced_onion)
    pot.stir(3 min or onion is soft)
    pot.add([minced_garlic, oregano, red_pepper_flakes])
    pot.stir(1 min)
    pot.add(ziti, chicken_broth_part_1, water)

    pot.high_heat()
    pot.stir(20 min or liquid is thick and syrupy)


def incorporate_vegetables(pot, servings):
    (
        broccoli, sun_dried_tomatoes, chicken_broth_part_2
    ) = get_ingredients(["broccoli", "sun_dried_tomatoes", "chicken_broth_part_2"], servings)
    diced_onion = sun_dried_tomatoes.dice()

    pot.medium_heat
    pot.add([broccoli, sun_dried_tomatoes, chicken_broth_part_2])
    pot.stir(1 min)
    pot.cover(3 min or broccoli is almost tender)


def combine_all(pot, servings, prepared_chicken):
    (
        heavy_cream, asiago, lemon_juice
    ) = get_ingredients(["heavy_cream", "asiago", "lemon_juice"], servings)

    pot.high_heat()
    pot.add([heavy_cream, asiago, lemon_juice, prepared_chicken])
    pot.stir(3 min or cream is thickened)


def cook_dish(servings):
    pot = DutchOven() if DUTCHOVEN_IN_KITCHEN else BigPot()

    prepare_chicken(pot, servings)
    prepared_chicken = pot.empty()

    prepare_pasta(pot, servings)
    incorporate_vegetables(pot, servings)

    combine_all(pot, servings, chicken)
    sleep(10) # let the pasta cool and sauce thicken

    return pot.empty()


def main():
    servings = friends.count() + 1 # make sure to include yourself!
    chicken_asiago_pasta = cook_dish(servings)
    friends.share_meal(chicken_asiago_pasta)